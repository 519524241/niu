{extend name="index/index"}

{block name="body"}
	<div class="col-xs-10">
			<ol class="breadcrumb">
				导航位置：<li><a href="#">文章列表</a></li>
			</ol>
			<h2>文章列表<small>无数据</small></h2>
			<table class="table table-hover table-responsive table-striped table-bordered">
				<thead>
					<tr>
						<th>ID</th>
						<th>文章标题</th>
						<th>所属栏目</th>
						<th>操作</th>
					</tr>
				</thead>
				<tbody>
					{foreach $data as $k => $v}
					<tr>
						<td>{$v.id}</td>
						<td>{$v.title}</td>
						<td>{$v.index.catename}</td>
						<td>
							<a href="/admin/articlelistEdit?id={$v.id}"><button data-id="{$v.id}" class="edit btn btn-primary btn-xs">编辑</button></a>
							<button data-id="{$v.id}" class="del btn btn-danger btn-xs">删除</button>
						</td>
					</tr>
					{/foreach}
				</tbody>
			</table>
			<nav class="text-center">
				<ul class="pagination">
					<li><a href="#">1</a></li>
					<li><a href="#">2</a></li>
					<li><a href="#">3</a></li>
					<li><a href="#">4</a></li>
				</ul>
			</nav>
		</div>
{/block}

	
{block name="script"}
	<script type="text/javascript">
		$('.del').click(function(e){
			var id = $(this).data('id');
			var ts=$(this);

			console.dir($(this).data('id'));
			$.ajax({
				url:'/admin/articlelist/del',
				type:'get',
				data:{
					id:id,
				},
				success:function(res)
				{
					console.dir(res);
					if (res.code==1) {
						alert(res.msg)
						ts.parent().parent().remove();

					} else {
						alert(res.msg)
					}
				}
			})
			return false;
		})

		$('.btn-xs').click(function(e){
			console.dir(e);
			var ts=$(this);
			// console.dir(ts.parent());
		})

		// $('.edit').click(function(){
		// 	var editId=$(this).data('id');
		// 	var url='/admin/articlelist/edit?id='+editId;

		// 	console.dir(url);
		// 	$.ajax({
		// 		url:'/admin/articlelist/edit',
		// 		type:'get',
		// 		data:{
		// 			id:editId
		// 		},
		// 		success:function(res)
		// 		{
		// 			window.location.href="";
		// 		}
		// 	})
		// })
	</script>
{/block}